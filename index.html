<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Italian Word Blaster — FINAL</title>
		<style>
			:root {
				--bg: #0b0f14;
				--panel: #121821;
				--text: #e8eef6;
				--muted: #9fb2c8;
				--card: #0f141c;
				--shadow: 0 10px 30px rgba(0, 0, 0, 0.35),
					inset 0 0 0 1px rgba(255, 255, 255, 0.04);
				--green: #29a36d;
				--red: #d93b3b;
				--blue: #2f7bdc;
				--gold: #e0b000;
			}
			* {
				box-sizing: border-box;
			}
			html,
			body {
				height: 100%;
			}
			body {
				margin: 0;
				font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
					Cantarell, 'Helvetica Neue', Arial;
				color: var(--text);
				background: var(--bg);
				background-image: radial-gradient(
						1200px 600px at -15% -10%,
						rgba(41, 163, 109, 0.08),
						transparent
					),
					radial-gradient(
						1200px 600px at 115% 110%,
						rgba(217, 59, 59, 0.08),
						transparent
					),
					radial-gradient(
						600px 300px at 50% -10%,
						rgba(255, 255, 255, 0.04),
						transparent
					);
			}
			.wrap {
				max-width: 1200px;
				margin: 0 auto;
				padding: 24px;
			}
			header {
				display: flex;
				gap: 16px;
				align-items: center;
				justify-content: space-between;
				margin-bottom: 16px;
			}
			.brand {
				display: flex;
				gap: 14px;
				align-items: center;
			}
			.logo {
				width: 44px;
				height: 44px;
				border-radius: 12px;
				position: relative;
				box-shadow: var(--shadow);
				background: linear-gradient(135deg, #1b1f27, #0e131b);
			}
			.flag {
				position: absolute;
				inset: 4px;
				border-radius: 9px;
				background: linear-gradient(
					90deg,
					#2db665 33%,
					#f5f5f5 33% 66%,
					#e24343 0
				);
			}
			h1 {
				font-size: clamp(20px, 2.6vw, 30px);
				margin: 0;
			}
			.sub {
				color: var(--muted);
				font-size: 14px;
			}

			.controls {
				display: grid;
				grid-template-columns: 2fr 1fr 1fr 1fr;
				gap: 12px;
				margin: 8px 0;
			}
			.panel {
				background: var(--panel);
				border-radius: 16px;
				padding: 14px;
				box-shadow: var(--shadow);
			}
			.ctrl {
				display: flex;
				flex-direction: column;
				gap: 8px;
			}
			label {
				font-size: 12px;
				color: var(--muted);
			}
			input[type='number'],
			select {
				width: 100%;
				background: #0e141b;
				color: var(--text);
				border: 1px solid #1f2530;
				padding: 10px;
				border-radius: 12px;
			}
			.pos-pills {
				display: flex;
				flex-wrap: wrap;
				gap: 8px;
			}
			.pill {
				padding: 8px 12px;
				border-radius: 999px;
				border: 1px solid #263042;
				background: #0e141b;
				cursor: pointer;
				user-select: none;
			}
			.pill input {
				display: none;
			}
			.pill.active {
				box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.06),
					inset 0 0 0 1px rgba(255, 255, 255, 0.06);
			}
			.pill[data-pos='noun'].active {
				background: rgba(41, 163, 109, 0.18);
				border-color: #2e7d57;
			}
			.pill[data-pos='verb'].active {
				background: rgba(217, 59, 59, 0.18);
				border-color: #8d2b2b;
			}
			.pill[data-pos='adj'].active {
				background: rgba(47, 123, 220, 0.18);
				border-color: #2c63a8;
			}
			.pill[data-pos='adv'].active {
				background: rgba(224, 176, 0, 0.18);
				border-color: #7d6200;
			}

			.grid {
				display: grid;
				grid-template-columns: 1.2fr 0.8fr;
				gap: 16px;
				margin-top: 10px;
			}

			.qcard {
				background: linear-gradient(180deg, #111824, #0c121a);
				border-radius: 20px;
				padding: 24px;
				box-shadow: var(--shadow);
				position: relative;
				overflow: hidden;
			}
			.qbadge {
				position: absolute;
				top: 14px;
				right: 14px;
				font-size: 12px;
				padding: 6px 10px;
				border-radius: 999px;
				background: rgba(255, 255, 255, 0.06);
				border: 1px solid rgba(255, 255, 255, 0.08);
			}
			.qword {
				font-size: clamp(26px, 6vw, 56px);
				letter-spacing: 0.5px;
				font-weight: 800;
				margin: 22px 0 6px;
			}
			.hint {
				color: var(--muted);
				font-size: 13px;
			}

			.optgrid {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 12px;
			}
			.optbtn {
				border-radius: 16px;
				padding: 16px;
				background: var(--card);
				border: 1px solid #1d2430;
				cursor: pointer;
				box-shadow: var(--shadow);
				transition: 0.15s transform, 0.2s border-color, 0.2s box-shadow;
				color: #fff;
			}
			.optbtn:hover {
				transform: translateY(-2px);
			}
			.optbtn.correct {
				border-color: #2db665;
				box-shadow: 0 0 0 2px rgba(45, 182, 101, 0.3);
			}
			.shake {
				animation: shake 0.3s;
			}
			@keyframes shake {
				10%,
				90% {
					transform: translateX(-1px);
				}
				20%,
				80% {
					transform: translateX(2px);
				}
				30%,
				50%,
				70% {
					transform: translateX(-4px);
				}
				40%,
				60% {
					transform: translateX(4px);
				}
			}

			.score {
				display: flex;
				gap: 12px;
				align-items: center;
				flex-wrap: wrap;
			}
			.chip {
				padding: 8px 12px;
				border-radius: 999px;
				background: #0e141b;
				border: 1px solid #212a38;
			}
			.chip.good {
				border-color: #204c36;
				color: #9ee2bf;
			}
			.chip.bad {
				border-color: #5a1b1b;
				color: #ffb3b3;
			}

			.progress {
				position: relative;
				display: flex;
				align-items: center;
				justify-content: center;
				aspect-ratio: 1;
				width: 120px;
				margin: auto;
			}
			.progress svg {
				filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.4));
			}
			.progress .center {
				position: absolute;
				text-align: center;
			}
			.progress .center strong {
				display: block;
				font-size: 20px;
			}
			.progress .center span {
				font-size: 11px;
				color: var(--muted);
			}

			.side {
				display: flex;
				flex-direction: column;
				gap: 14px;
			}

			.pos-legend {
				display: flex;
				gap: 10px;
				flex-wrap: wrap;
			}
			.legend-item {
				display: flex;
				align-items: center;
				gap: 8px;
				font-size: 12px;
				color: var(--muted);
			}
			.swatch {
				width: 10px;
				height: 10px;
				border-radius: 2px;
			}

			.footer {
				margin-top: 16px;
				display: flex;
				align-items: center;
				justify-content: space-between;
				color: var(--muted);
				font-size: 12px;
			}
			.btn {
				background: #162233;
				color: var(--text);
				border: 1px solid #253249;
				padding: 10px 14px;
				border-radius: 12px;
				cursor: pointer;
			}
			.btn:active {
				transform: translateY(1px);
			}

			.qcard:before {
				content: '';
				position: absolute;
				left: 0;
				top: 0;
				bottom: 0;
				width: 6px;
				background: linear-gradient(var(--green), var(--green));
			}
			.qcard[data-pos='verb']:before {
				background: linear-gradient(var(--red), var(--red));
			}
			.qcard[data-pos='adj']:before {
				background: linear-gradient(var(--blue), var(--blue));
			}
			.qcard[data-pos='adv']:before {
				background: linear-gradient(var(--gold), var(--gold));
			}

			.overlay {
				position: fixed;
				inset: 0;
				background: rgba(0, 0, 0, 0.65);
				backdrop-filter: blur(2px);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 50;
			}
			.win {
				position: relative;
				background: linear-gradient(180deg, #111824, #0c121a);
				border-radius: 24px;
				padding: 26px 26px 20px;
				box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
				text-align: center;
				max-width: 520px;
			}
			.trophy {
				font-size: 68px;
				line-height: 1;
				display: block;
			}
			.win h2 {
				margin: 6px 0 4px;
				font-size: 28px;
			}
			.win p {
				color: var(--muted);
				margin: 0 0 14px;
			}

			#fw {
				position: fixed;
				inset: 0;
				pointer-events: none;
				z-index: 40;
			}

			@media (max-width: 980px) {
				.grid {
					grid-template-columns: 1fr;
				}
				.optgrid {
					grid-template-columns: 1fr 1fr;
				}
				.controls {
					grid-template-columns: 1fr;
				}
				.progress {
					width: 100px;
				}
			}
		</style>
	</head>
	<body>
		<div id="root"></div>
		<canvas id="fw"></canvas>

	   <!-- PACKS: everything is embedded below. Add more by duplicating a JSON script with id="pack-*" and an array of {it,en,pos}.
		   Optional: add data-label on the script tag for a friendly pack name (shown in the UI). -->
	   <script id="pack-core" type="application/json" data-label="Core Basics">
			{
				"words": [
					{ "it": "casa", "en": "house", "pos": "noun" },
					{ "it": "uomo", "en": "man", "pos": "noun" },
					{ "it": "donna", "en": "woman", "pos": "noun" },
					{ "it": "bambino", "en": "child", "pos": "noun" },
					{ "it": "essere", "en": "to be", "pos": "verb" },
					{ "it": "avere", "en": "to have", "pos": "verb" },
					{ "it": "bello", "en": "beautiful", "pos": "adj" },
					{ "it": "sempre", "en": "always", "pos": "adv" }
				]
			}
		</script>

		<!-- Verbs (Mega) -->
	<script id="pack-verbs" type="application/json" data-label="Common Verbs">
			{
				"words": [
					{ "it": "fare", "en": "to do/make", "pos": "verb" },
					{ "it": "dire", "en": "to say", "pos": "verb" },
					{ "it": "potere", "en": "to be able to", "pos": "verb" },
					{ "it": "andare", "en": "to go", "pos": "verb" },
					{ "it": "venire", "en": "to come", "pos": "verb" },
					{ "it": "vedere", "en": "to see", "pos": "verb" },
					{ "it": "sapere", "en": "to know (facts)", "pos": "verb" },
					{ "it": "stare", "en": "to stay", "pos": "verb" },
					{ "it": "prendere", "en": "to take", "pos": "verb" },
					{ "it": "mettere", "en": "to put", "pos": "verb" },
					{ "it": "trovare", "en": "to find", "pos": "verb" },
					{ "it": "pensare", "en": "to think", "pos": "verb" },
					{ "it": "parlare", "en": "to speak", "pos": "verb" },
					{ "it": "mangiare", "en": "to eat", "pos": "verb" },
					{ "it": "bere", "en": "to drink", "pos": "verb" },
					{ "it": "leggere", "en": "to read", "pos": "verb" },
					{ "it": "scrivere", "en": "to write", "pos": "verb" },
					{ "it": "dormire", "en": "to sleep", "pos": "verb" },
					{ "it": "aprire", "en": "to open", "pos": "verb" },
					{ "it": "chiudere", "en": "to close", "pos": "verb" },
					{ "it": "studiare", "en": "to study", "pos": "verb" },
					{ "it": "lavorare", "en": "to work", "pos": "verb" },
					{ "it": "usare", "en": "to use", "pos": "verb" },
					{ "it": "giocare", "en": "to play", "pos": "verb" },
					{ "it": "comprare", "en": "to buy", "pos": "verb" },
					{ "it": "vendere", "en": "to sell", "pos": "verb" },
					{ "it": "camminare", "en": "to walk", "pos": "verb" },
					{ "it": "correre", "en": "to run", "pos": "verb" },
					{ "it": "sentire", "en": "to hear/feel", "pos": "verb" },
					{ "it": "ascoltare", "en": "to listen", "pos": "verb" },
					{ "it": "guardare", "en": "to watch", "pos": "verb" },
					{ "it": "vivere", "en": "to live", "pos": "verb" },
					{ "it": "morire", "en": "to die", "pos": "verb" },
					{ "it": "amare", "en": "to love", "pos": "verb" },
					{ "it": "odiare", "en": "to hate", "pos": "verb" },
					{ "it": "ricordare", "en": "to remember", "pos": "verb" },
					{ "it": "dimenticare", "en": "to forget", "pos": "verb" },
					{ "it": "aspettare", "en": "to wait", "pos": "verb" },
					{ "it": "partire", "en": "to leave", "pos": "verb" },
					{ "it": "arrivare", "en": "to arrive", "pos": "verb" },
					{ "it": "capire", "en": "to understand", "pos": "verb" },
					{ "it": "chiedere", "en": "to ask", "pos": "verb" },
					{ "it": "rispondere", "en": "to answer", "pos": "verb" },
					{ "it": "aiutare", "en": "to help", "pos": "verb" },
					{ "it": "provare", "en": "to try", "pos": "verb" },
					{ "it": "cambiare", "en": "to change", "pos": "verb" },
					{ "it": "portare", "en": "to bring/wear", "pos": "verb" },
					{ "it": "tornare", "en": "to return", "pos": "verb" },
					{ "it": "scegliere", "en": "to choose", "pos": "verb" },
					{ "it": "chiamare", "en": "to call", "pos": "verb" },
					{ "it": "costruire", "en": "to build", "pos": "verb" },
					{ "it": "cucinare", "en": "to cook", "pos": "verb" },
					{ "it": "lavare", "en": "to wash", "pos": "verb" },
					{ "it": "imparare", "en": "to learn", "pos": "verb" },
					{ "it": "insegnare", "en": "to teach", "pos": "verb" },
					{ "it": "pagare", "en": "to pay", "pos": "verb" },
					{ "it": "viaggiare", "en": "to travel", "pos": "verb" },
					{ "it": "guidare", "en": "to drive", "pos": "verb" },
					{ "it": "entrare", "en": "to enter", "pos": "verb" },
					{ "it": "uscire", "en": "to go out", "pos": "verb" }
				]
			}
		</script>

		<!-- Nouns (Ultra) -->
	<script id="pack-nouns" type="application/json" data-label="Common Nouns">
			{
				"words": [
					{ "it": "giorno", "en": "day", "pos": "noun" },
					{ "it": "tempo", "en": "time/weather", "pos": "noun" },
					{ "it": "anno", "en": "year", "pos": "noun" },
					{ "it": "mese", "en": "month", "pos": "noun" },
					{ "it": "settimana", "en": "week", "pos": "noun" },
					{ "it": "vita", "en": "life", "pos": "noun" },
					{ "it": "mano", "en": "hand", "pos": "noun" },
					{ "it": "occhio", "en": "eye", "pos": "noun" },
					{ "it": "parola", "en": "word", "pos": "noun" },
					{ "it": "strada", "en": "street", "pos": "noun" },
					{ "it": "famiglia", "en": "family", "pos": "noun" },
					{ "it": "città", "en": "city", "pos": "noun" },
					{ "it": "paese", "en": "country/town", "pos": "noun" },
					{ "it": "lavoro", "en": "work/job", "pos": "noun" },
					{ "it": "soldi", "en": "money", "pos": "noun" },
					{ "it": "problema", "en": "problem", "pos": "noun" },
					{ "it": "soluzione", "en": "solution", "pos": "noun" },
					{ "it": "domanda", "en": "question", "pos": "noun" },
					{ "it": "risposta", "en": "answer", "pos": "noun" },
					{ "it": "scuola", "en": "school", "pos": "noun" },
					{ "it": "università", "en": "university", "pos": "noun" },
					{ "it": "studente", "en": "student", "pos": "noun" },
					{ "it": "professore", "en": "professor", "pos": "noun" },
					{ "it": "libro", "en": "book", "pos": "noun" },
					{ "it": "pagina", "en": "page", "pos": "noun" },
					{ "it": "storia", "en": "history/story", "pos": "noun" },
					{ "it": "giornale", "en": "newspaper", "pos": "noun" },
					{ "it": "telefono", "en": "telephone", "pos": "noun" },
					{ "it": "computer", "en": "computer", "pos": "noun" }
				]
			}
		</script>

		<!-- Adjectives & Adverbs (Giga) -->
	<script id="pack-adjectives" type="application/json" data-label="Adjectives">
			{
				"words": [
					{ "it": "brutto", "en": "ugly", "pos": "adj" },
					{ "it": "grande", "en": "big", "pos": "adj" },
					{ "it": "piccolo", "en": "small", "pos": "adj" },
					{ "it": "lungo", "en": "long", "pos": "adj" },
					{ "it": "corto", "en": "short", "pos": "adj" },
					{ "it": "alto", "en": "tall/high", "pos": "adj" },
					{ "it": "basso", "en": "short/low", "pos": "adj" },
					{ "it": "nuovo", "en": "new", "pos": "adj" },
					{ "it": "buono", "en": "good", "pos": "adj" },
					{ "it": "cattivo", "en": "bad", "pos": "adj" },
					{ "it": "caldo", "en": "hot", "pos": "adj" },
					{ "it": "freddo", "en": "cold", "pos": "adj" },
					{ "it": "facile", "en": "easy", "pos": "adj" },
					{ "it": "difficile", "en": "difficult", "pos": "adj" },
					{ "it": "felice", "en": "happy", "pos": "adj" },
					{ "it": "triste", "en": "sad", "pos": "adj" },
					{ "it": "forte", "en": "strong", "pos": "adj" },
					{ "it": "debole", "en": "weak", "pos": "adj" }
				]
			}
		</script>
	<script id="pack-adverbs" type="application/json" data-label="Adverbs">
			{
				"words": [
					{ "it": "mai", "en": "never", "pos": "adv" },
					{ "it": "spesso", "en": "often", "pos": "adv" },
					{ "it": "raramente", "en": "rarely", "pos": "adv" },
					{ "it": "oggi", "en": "today", "pos": "adv" },
					{ "it": "domani", "en": "tomorrow", "pos": "adv" },
					{ "it": "ieri", "en": "yesterday", "pos": "adv" },
					{ "it": "presto", "en": "early/soon", "pos": "adv" },
					{ "it": "tardi", "en": "late", "pos": "adv" },
					{ "it": "adesso", "en": "now", "pos": "adv" },
					{ "it": "poi", "en": "then/later", "pos": "adv" },
					{ "it": "prima", "en": "before", "pos": "adv" },
					{ "it": "dopo", "en": "after", "pos": "adv" },
					{ "it": "qui", "en": "here", "pos": "adv" },
					{ "it": "lì", "en": "there", "pos": "adv" },
					{ "it": "bene", "en": "well", "pos": "adv" },
					{ "it": "male", "en": "badly", "pos": "adv" }
				]
			}
		</script>

		<!-- Themed Packs: Travel, Food, Emotions, Business, Nature, Tech, Arts, Sports, Health, Politics, Science, Household -->
	<script id="pack-travel" type="application/json" data-label="Travel">
			{
				"words": [
					{ "it": "aeroporto", "en": "airport", "pos": "noun" },
					{ "it": "stazione", "en": "station", "pos": "noun" },
					{ "it": "biglietto", "en": "ticket", "pos": "noun" },
					{ "it": "valigia", "en": "suitcase", "pos": "noun" },
					{ "it": "passaporto", "en": "passport", "pos": "noun" },
					{ "it": "albergo", "en": "hotel", "pos": "noun" },
					{ "it": "prenotazione", "en": "reservation", "pos": "noun" },
					{ "it": "mappa", "en": "map", "pos": "noun" },
					{ "it": "turista", "en": "tourist", "pos": "noun" },
					{ "it": "spiaggia", "en": "beach", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-food" type="application/json" data-label="Food & Dining">
			{
				"words": [
					{ "it": "colazione", "en": "breakfast", "pos": "noun" },
					{ "it": "pranzo", "en": "lunch", "pos": "noun" },
					{ "it": "cena", "en": "dinner", "pos": "noun" },
					{ "it": "antipasto", "en": "starter", "pos": "noun" },
					{ "it": "primo", "en": "first course", "pos": "noun" },
					{ "it": "secondo", "en": "second course", "pos": "noun" },
					{ "it": "contorno", "en": "side dish", "pos": "noun" },
					{ "it": "dolce", "en": "dessert", "pos": "noun" },
					{ "it": "conto", "en": "bill/check", "pos": "noun" },
					{ "it": "ristorante", "en": "restaurant", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-emotions" type="application/json" data-label="Emotions">
			{
				"words": [
					{ "it": "arrabbiato", "en": "angry", "pos": "adj" },
					{ "it": "calmo", "en": "calm", "pos": "adj" },
					{ "it": "ansioso", "en": "anxious", "pos": "adj" },
					{ "it": "sorpreso", "en": "surprised", "pos": "adj" },
					{ "it": "gentile", "en": "kind", "pos": "adj" },
					{ "it": "timido", "en": "shy", "pos": "adj" },
					{ "it": "coraggioso", "en": "brave", "pos": "adj" },
					{ "it": "ottimista", "en": "optimistic", "pos": "adj" },
					{ "it": "pessimista", "en": "pessimistic", "pos": "adj" }
				]
			}
		</script>
	<script id="pack-business" type="application/json" data-label="Business & Office">
			{
				"words": [
					{ "it": "azienda", "en": "company", "pos": "noun" },
					{ "it": "impresa", "en": "firm", "pos": "noun" },
					{ "it": "ufficio", "en": "office", "pos": "noun" },
					{ "it": "riunione", "en": "meeting", "pos": "noun" },
					{ "it": "contratto", "en": "contract", "pos": "noun" },
					{ "it": "documento", "en": "document", "pos": "noun" },
					{ "it": "firma", "en": "signature", "pos": "noun" },
					{ "it": "ricerca", "en": "research", "pos": "noun" },
					{ "it": "lezione", "en": "lesson", "pos": "noun" },
					{ "it": "esame", "en": "exam", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-nature" type="application/json" data-label="Nature & Weather">
			{
				"words": [
					{ "it": "natura", "en": "nature", "pos": "noun" },
					{ "it": "ambiente", "en": "environment", "pos": "noun" },
					{ "it": "cielo", "en": "sky", "pos": "noun" },
					{ "it": "sole", "en": "sun", "pos": "noun" },
					{ "it": "luna", "en": "moon", "pos": "noun" },
					{ "it": "stella", "en": "star", "pos": "noun" },
					{ "it": "vento", "en": "wind", "pos": "noun" },
					{ "it": "pioggia", "en": "rain", "pos": "noun" },
					{ "it": "neve", "en": "snow", "pos": "noun" },
					{ "it": "nuvola", "en": "cloud", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-tech" type="application/json" data-label="Technology">
			{
				"words": [
					{ "it": "tecnologia", "en": "technology", "pos": "noun" },
					{ "it": "cellulare", "en": "mobile phone", "pos": "noun" },
					{ "it": "rete", "en": "network", "pos": "noun" },
					{ "it": "software", "en": "software", "pos": "noun" },
					{ "it": "programma", "en": "program", "pos": "noun" },
					{ "it": "schermo", "en": "screen", "pos": "noun" },
					{ "it": "tastiera", "en": "keyboard", "pos": "noun" },
					{ "it": "stampante", "en": "printer", "pos": "noun" },
					{ "it": "batteria", "en": "battery", "pos": "noun" },
					{ "it": "caricatore", "en": "charger", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-arts" type="application/json" data-label="Arts & Culture">
			{
				"words": [
					{ "it": "arte", "en": "art", "pos": "noun" },
					{ "it": "pittura", "en": "painting", "pos": "noun" },
					{ "it": "musica", "en": "music", "pos": "noun" },
					{ "it": "film", "en": "movie", "pos": "noun" },
					{ "it": "teatro", "en": "theatre", "pos": "noun" },
					{ "it": "poesia", "en": "poetry", "pos": "noun" },
					{ "it": "romanzo", "en": "novel", "pos": "noun" },
					{ "it": "fotografia", "en": "photograph", "pos": "noun" },
					{ "it": "mostra", "en": "exhibition", "pos": "noun" },
					{ "it": "cultura", "en": "culture", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-sports" type="application/json" data-label="Sports">
			{
				"words": [
					{ "it": "sport", "en": "sport", "pos": "noun" },
					{ "it": "partita", "en": "match", "pos": "noun" },
					{ "it": "squadra", "en": "team", "pos": "noun" },
					{ "it": "giocatore", "en": "player", "pos": "noun" },
					{ "it": "allenatore", "en": "coach", "pos": "noun" },
					{ "it": "calcio", "en": "soccer", "pos": "noun" },
					{ "it": "nuoto", "en": "swimming", "pos": "noun" },
					{ "it": "corsa", "en": "running", "pos": "noun" },
					{ "it": "gara", "en": "competition", "pos": "noun" },
					{ "it": "vittoria", "en": "victory", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-health" type="application/json" data-label="Health & Medicine">
			{
				"words": [
					{ "it": "ospedale", "en": "hospital", "pos": "noun" },
					{ "it": "clinica", "en": "clinic", "pos": "noun" },
					{ "it": "medico", "en": "doctor", "pos": "noun" },
					{ "it": "infermiere", "en": "nurse", "pos": "noun" },
					{ "it": "paziente", "en": "patient", "pos": "noun" },
					{ "it": "farmacia", "en": "pharmacy", "pos": "noun" },
					{ "it": "medicina", "en": "medicine", "pos": "noun" },
					{ "it": "pillola", "en": "pill", "pos": "noun" },
					{ "it": "operazione", "en": "operation", "pos": "noun" },
					{ "it": "cura", "en": "treatment", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-politics" type="application/json" data-label="Politics & Civics">
			{
				"words": [
					{ "it": "politica", "en": "politics", "pos": "noun" },
					{ "it": "governo", "en": "government", "pos": "noun" },
					{ "it": "parlamento", "en": "parliament", "pos": "noun" },
					{ "it": "presidente", "en": "president", "pos": "noun" },
					{ "it": "ministro", "en": "minister", "pos": "noun" },
					{ "it": "legge", "en": "law", "pos": "noun" },
					{ "it": "giustizia", "en": "justice", "pos": "noun" },
					{ "it": "elezione", "en": "election", "pos": "noun" },
					{ "it": "partito", "en": "party", "pos": "noun" },
					{ "it": "democrazia", "en": "democracy", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-science" type="application/json" data-label="Science & Space">
			{
				"words": [
					{ "it": "scienza", "en": "science", "pos": "noun" },
					{ "it": "fisica", "en": "physics", "pos": "noun" },
					{ "it": "chimica", "en": "chemistry", "pos": "noun" },
					{ "it": "biologia", "en": "biology", "pos": "noun" },
					{ "it": "astronomia", "en": "astronomy", "pos": "noun" },
					{ "it": "universo", "en": "universe", "pos": "noun" },
					{ "it": "galassia", "en": "galaxy", "pos": "noun" },
					{ "it": "pianeta", "en": "planet", "pos": "noun" },
					{ "it": "orbita", "en": "orbit", "pos": "noun" },
					{ "it": "satellite", "en": "satellite", "pos": "noun" }
				]
			}
		</script>
	<script id="pack-household" type="application/json" data-label="Household">
			{
				"words": [
					{ "it": "appartamento", "en": "apartment", "pos": "noun" },
					{ "it": "stanza", "en": "room", "pos": "noun" },
					{ "it": "salotto", "en": "living room", "pos": "noun" },
					{ "it": "cucina", "en": "kitchen", "pos": "noun" },
					{ "it": "bagno", "en": "bathroom", "pos": "noun" },
					{ "it": "letto", "en": "bed", "pos": "noun" },
					{ "it": "sedia", "en": "chair", "pos": "noun" },
					{ "it": "tavolo", "en": "table", "pos": "noun" },
					{ "it": "armadio", "en": "wardrobe", "pos": "noun" },
					{ "it": "lampada", "en": "lamp", "pos": "noun" }
				]
			}
		</script>

		<!-- Massive drop-in pack from attachment -->
		<script id="pack-massive" type="application/json" data-label="Massive Drop-in">
			{
				"words": [
					{"it":"casa","en":"house","pos":"noun"},
					{"it":"appartamento","en":"apartment","pos":"noun"},
					{"it":"stanza","en":"room","pos":"noun"},
					{"it":"salotto","en":"living room","pos":"noun"},
					{"it":"cucina","en":"kitchen","pos":"noun"},
					{"it":"bagno","en":"bathroom","pos":"noun"},
					{"it":"camera","en":"bedroom","pos":"noun"},
					{"it":"letto","en":"bed","pos":"noun"},
					{"it":"sedia","en":"chair","pos":"noun"},
					{"it":"tavolo","en":"table","pos":"noun"},
					{"it":"finestra","en":"window","pos":"noun"},
					{"it":"porta","en":"door","pos":"noun"},
					{"it":"chiave","en":"key","pos":"noun"},
					{"it":"muro","en":"wall","pos":"noun"},
					{"it":"soffitto","en":"ceiling","pos":"noun"},
					{"it":"pavimento","en":"floor","pos":"noun"},
					{"it":"lampada","en":"lamp","pos":"noun"},
					{"it":"luce","en":"light","pos":"noun"},
					{"it":"interruttore","en":"switch","pos":"noun"},
					{"it":"presa","en":"socket","pos":"noun"},
					{"it":"frigorifero","en":"fridge","pos":"noun"},
					{"it":"forno","en":"oven","pos":"noun"},
					{"it":"fornello","en":"stove","pos":"noun"},
					{"it":"lavandino","en":"sink","pos":"noun"},
					{"it":"lavastoviglie","en":"dishwasher","pos":"noun"},
					{"it":"lavatrice","en":"washing machine","pos":"noun"},
					{"it":"asciugatrice","en":"dryer","pos":"noun"},
					{"it":"doccia","en":"shower","pos":"noun"},
					{"it":"vasca","en":"bathtub","pos":"noun"},
					{"it":"specchio","en":"mirror","pos":"noun"},
					{"it":"armadio","en":"wardrobe","pos":"noun"},
					{"it":"cassetto","en":"drawer","pos":"noun"},
					{"it":"scaffale","en":"shelf","pos":"noun"},
					{"it":"libreria","en":"bookcase","pos":"noun"},
					{"it":"tappeto","en":"carpet","pos":"noun"},
					{"it":"tende","en":"curtains","pos":"noun"},
					{"it":"quadro","en":"picture/painting","pos":"noun"},
					{"it":"televisione","en":"television","pos":"noun"},
					{"it":"radio","en":"radio","pos":"noun"},
					{"it":"computer","en":"computer","pos":"noun"},
					{"it":"telefono","en":"telephone","pos":"noun"},
					{"it":"tablet","en":"tablet","pos":"noun"},
					{"it":"orologio","en":"clock/watch","pos":"noun"},
					{"it":"calendario","en":"calendar","pos":"noun"},
					{"it":"penna","en":"pen","pos":"noun"},
					{"it":"matita","en":"pencil","pos":"noun"},
					{"it":"gomma","en":"eraser","pos":"noun"},
					{"it":"quaderno","en":"notebook","pos":"noun"},
					{"it":"libro","en":"book","pos":"noun"},
					{"it":"rivista","en":"magazine","pos":"noun"},
					{"it":"giornale","en":"newspaper","pos":"noun"},
					{"it":"busta","en":"envelope","pos":"noun"},
					{"it":"lettera","en":"letter","pos":"noun"},
					{"it":"pacco","en":"package","pos":"noun"},
					{"it":"posta","en":"mail","pos":"noun"},
					{"it":"bicchiere","en":"glass","pos":"noun"},
					{"it":"tazza","en":"cup","pos":"noun"},
					{"it":"piatto","en":"plate","pos":"noun"},
					{"it":"ciotola","en":"bowl","pos":"noun"},
					{"it":"coltello","en":"knife","pos":"noun"},
					{"it":"forchetta","en":"fork","pos":"noun"},
					{"it":"cucchiaio","en":"spoon","pos":"noun"},
					{"it":"tovagliolo","en":"napkin","pos":"noun"},
					{"it":"tovaglia","en":"tablecloth","pos":"noun"},
					{"it":"bottiglia","en":"bottle","pos":"noun"},
					{"it":"pane","en":"bread","pos":"noun"},
					{"it":"burro","en":"butter","pos":"noun"},
					{"it":"olio","en":"oil","pos":"noun"},
					{"it":"aceto","en":"vinegar","pos":"noun"},
					{"it":"sale","en":"salt","pos":"noun"},
					{"it":"pepe","en":"pepper","pos":"noun"},
					{"it":"zucchero","en":"sugar","pos":"noun"},
					{"it":"farina","en":"flour","pos":"noun"},
					{"it":"latte","en":"milk","pos":"noun"},
					{"it":"uovo","en":"egg","pos":"noun"},
					{"it":"carne","en":"meat","pos":"noun"},
					{"it":"pesce","en":"fish","pos":"noun"},
					{"it":"pollo","en":"chicken","pos":"noun"},
					{"it":"prosciutto","en":"ham","pos":"noun"},
					{"it":"formaggio","en":"cheese","pos":"noun"},
					{"it":"pomodoro","en":"tomato","pos":"noun"},
					{"it":"insalata","en":"salad","pos":"noun"},
					{"it":"lattuga","en":"lettuce","pos":"noun"},
					{"it":"cipolla","en":"onion","pos":"noun"},
					{"it":"aglio","en":"garlic","pos":"noun"},
					{"it":"carota","en":"carrot","pos":"noun"},
					{"it":"patata","en":"potato","pos":"noun"},
					{"it":"melanzana","en":"eggplant","pos":"noun"},
					{"it":"zucchina","en":"zucchini","pos":"noun"},
					{"it":"peperone","en":"pepper","pos":"noun"},
					{"it":"fungo","en":"mushroom","pos":"noun"},
					{"it":"mela","en":"apple","pos":"noun"},
					{"it":"pera","en":"pear","pos":"noun"},
					{"it":"arancia","en":"orange","pos":"noun"},
					{"it":"limone","en":"lemon","pos":"noun"},
					{"it":"banana","en":"banana","pos":"noun"},
					{"it":"fragola","en":"strawberry","pos":"noun"},
					{"it":"uva","en":"grapes","pos":"noun"},
					{"it":"ciliegia","en":"cherry","pos":"noun"},
					{"it":"pesca","en":"peach","pos":"noun"},
					{"it":"albicocca","en":"apricot","pos":"noun"},
					{"it":"anguria","en":"watermelon","pos":"noun"},
					{"it":"melone","en":"melon","pos":"noun"},
					{"it":"ananas","en":"pineapple","pos":"noun"},
					{"it":"lampone","en":"raspberry","pos":"noun"},
					{"it":"mirtillo","en":"blueberry","pos":"noun"},
					{"it":"caffè","en":"coffee","pos":"noun"},
					{"it":"tè","en":"tea","pos":"noun"},
					{"it":"acqua","en":"water","pos":"noun"},
					{"it":"vino","en":"wine","pos":"noun"},
					{"it":"birra","en":"beer","pos":"noun"},
					{"it":"succo","en":"juice","pos":"noun"},
					{"it":"bevanda","en":"drink/beverage","pos":"noun"},
					{"it":"città","en":"city","pos":"noun"},
					{"it":"paese","en":"country/town","pos":"noun"},
					{"it":"villaggio","en":"village","pos":"noun"},
					{"it":"quartiere","en":"neighborhood","pos":"noun"},
					{"it":"strada","en":"road","pos":"noun"},
					{"it":"via","en":"street","pos":"noun"},
					{"it":"viale","en":"avenue","pos":"noun"},
					{"it":"piazza","en":"square","pos":"noun"},
					{"it":"parco","en":"park","pos":"noun"},
					{"it":"giardino","en":"garden","pos":"noun"},
					{"it":"stazione","en":"station","pos":"noun"},
					{"it":"aeroporto","en":"airport","pos":"noun"},
					{"it":"porto","en":"port/harbor","pos":"noun"},
					{"it":"fermata","en":"bus stop","pos":"noun"},
					{"it":"ponte","en":"bridge","pos":"noun"},
					{"it":"galleria","en":"tunnel","pos":"noun"},
					{"it":"autostrada","en":"motorway","pos":"noun"},
					{"it":"uscita","en":"exit","pos":"noun"},
					{"it":"ingresso","en":"entrance","pos":"noun"},
					{"it":"albergo","en":"hotel","pos":"noun"},
					{"it":"ostello","en":"hostel","pos":"noun"},
					{"it":"ristorante","en":"restaurant","pos":"noun"},
					{"it":"bar","en":"bar/café","pos":"noun"},
					{"it":"caffetteria","en":"coffee shop","pos":"noun"},
					{"it":"panetteria","en":"bakery","pos":"noun"},
					{"it":"pasticceria","en":"pastry shop","pos":"noun"},
					{"it":"macelleria","en":"butcher","pos":"noun"},
					{"it":"mercato","en":"market","pos":"noun"},
					{"it":"negozio","en":"shop","pos":"noun"},
					{"it":"supermercato","en":"supermarket","pos":"noun"},
					{"it":"farmacia","en":"pharmacy","pos":"noun"},
					{"it":"ospedale","en":"hospital","pos":"noun"},
					{"it":"clinica","en":"clinic","pos":"noun"},
					{"it":"scuola","en":"school","pos":"noun"},
					{"it":"università","en":"university","pos":"noun"},
					{"it":"biblioteca","en":"library","pos":"noun"},
					{"it":"museo","en":"museum","pos":"noun"},
					{"it":"teatro","en":"theatre","pos":"noun"},
					{"it":"cinema","en":"cinema","pos":"noun"},
					{"it":"chiesa","en":"church","pos":"noun"},
					{"it":"cattedrale","en":"cathedral","pos":"noun"},
					{"it":"tempio","en":"temple","pos":"noun"},
					{"it":"ufficio","en":"office","pos":"noun"},
					{"it":"banca","en":"bank","pos":"noun"},
					{"it":"municipio","en":"town hall","pos":"noun"},
					{"it":"tribunale","en":"court","pos":"noun"},
					{"it":"palestra","en":"gym","pos":"noun"},
					{"it":"cielo","en":"sky","pos":"noun"},
					{"it":"sole","en":"sun","pos":"noun"},
					{"it":"luna","en":"moon","pos":"noun"},
					{"it":"stella","en":"star","pos":"noun"},
					{"it":"nuvola","en":"cloud","pos":"noun"},
					{"it":"pioggia","en":"rain","pos":"noun"},
					{"it":"neve","en":"snow","pos":"noun"},
					{"it":"vento","en":"wind","pos":"noun"},
					{"it":"temporale","en":"storm","pos":"noun"},
					{"it":"arcobaleno","en":"rainbow","pos":"noun"},
					{"it":"mare","en":"sea","pos":"noun"},
					{"it":"oceano","en":"ocean","pos":"noun"},
					{"it":"lago","en":"lake","pos":"noun"},
					{"it":"fiume","en":"river","pos":"noun"},
					{"it":"cascata","en":"waterfall","pos":"noun"},
					{"it":"isola","en":"island","pos":"noun"},
					{"it":"penisola","en":"peninsula","pos":"noun"},
					{"it":"spiaggia","en":"beach","pos":"noun"},
					{"it":"costa","en":"coast","pos":"noun"},
					{"it":"scogliera","en":"cliff","pos":"noun"},
					{"it":"montagna","en":"mountain","pos":"noun"},
					{"it":"collina","en":"hill","pos":"noun"},
					{"it":"valle","en":"valley","pos":"noun"},
					{"it":"pianura","en":"plain","pos":"noun"},
					{"it":"deserto","en":"desert","pos":"noun"},
					{"it":"foresta","en":"forest","pos":"noun"},
					{"it":"bosco","en":"wood","pos":"noun"},
					{"it":"prato","en":"meadow","pos":"noun"},
					{"it":"campo","en":"field","pos":"noun"},
					{"it":"albero","en":"tree","pos":"noun"},
					{"it":"fiore","en":"flower","pos":"noun"},
					{"it":"erba","en":"grass","pos":"noun"},
					{"it":"foglia","en":"leaf","pos":"noun"},
					{"it":"radice","en":"root","pos":"noun"},
					{"it":"seme","en":"seed","pos":"noun"},
					{"it":"pietra","en":"stone","pos":"noun"},
					{"it":"roccia","en":"rock","pos":"noun"},
					{"it":"sabbia","en":"sand","pos":"noun"},
					{"it":"terra","en":"soil/earth","pos":"noun"},
					{"it":"fuoco","en":"fire","pos":"noun"},
					{"it":"ghiaccio","en":"ice","pos":"noun"},
					{"it":"macchina","en":"car","pos":"noun"},
					{"it":"auto","en":"car","pos":"noun"},
					{"it":"bicicletta","en":"bicycle","pos":"noun"},
					{"it":"moto","en":"motorbike","pos":"noun"},
					{"it":"autobus","en":"bus","pos":"noun"},
					{"it":"tram","en":"tram","pos":"noun"},
					{"it":"metropolitana","en":"subway","pos":"noun"},
					{"it":"treno","en":"train","pos":"noun"},
					{"it":"vagone","en":"carriage","pos":"noun"},
					{"it":"nave","en":"ship","pos":"noun"},
					{"it":"traghetto","en":"ferry","pos":"noun"},
					{"it":"aereo","en":"airplane","pos":"noun"},
					{"it":"elicottero","en":"helicopter","pos":"noun"},
					{"it":"biglietto","en":"ticket","pos":"noun"},
					{"it":"abbonamento","en":"pass","pos":"noun"},
					{"it":"valigia","en":"suitcase","pos":"noun"},
					{"it":"zaino","en":"backpack","pos":"noun"},
					{"it":"mappa","en":"map","pos":"noun"},
					{"it":"medico","en":"doctor","pos":"noun"},
					{"it":"infermiere","en":"nurse","pos":"noun"},
					{"it":"insegnante","en":"teacher","pos":"noun"},
					{"it":"professore","en":"professor","pos":"noun"},
					{"it":"studente","en":"student","pos":"noun"},
					{"it":"avvocato","en":"lawyer","pos":"noun"},
					{"it":"ingegnere","en":"engineer","pos":"noun"},
					{"it":"architetto","en":"architect","pos":"noun"},
					{"it":"artista","en":"artist","pos":"noun"},
					{"it":"musicista","en":"musician","pos":"noun"},
					{"it":"attore","en":"actor","pos":"noun"},
					{"it":"scrittore","en":"writer","pos":"noun"},
					{"it":"cuoco","en":"cook","pos":"noun"},
					{"it":"cameriere","en":"waiter","pos":"noun"},
					{"it":"barista","en":"bartender","pos":"noun"},
					{"it":"autista","en":"driver","pos":"noun"},
					{"it":"pilota","en":"pilot","pos":"noun"},
					{"it":"meccanico","en":"mechanic","pos":"noun"},
					{"it":"commerciante","en":"merchant","pos":"noun"},
					{"it":"cassiere","en":"cashier","pos":"noun"},
					{"it":"poliziotto","en":"policeman","pos":"noun"},
					{"it":"pompiere","en":"firefighter","pos":"noun"},
					{"it":"soldato","en":"soldier","pos":"noun"},
					{"it":"contadino","en":"farmer","pos":"noun"},
					{"it":"pescatore","en":"fisherman","pos":"noun"},
					{"it":"muratore","en":"bricklayer","pos":"noun"},
					{"it":"elettricista","en":"electrician","pos":"noun"},
					{"it":"idraulico","en":"plumber","pos":"noun"},
					{"it":"parrucchiere","en":"hairdresser","pos":"noun"},
					{"it":"giornalista","en":"journalist","pos":"noun"},
					{"it":"fotografo","en":"photographer","pos":"noun"},
					{"it":"scienziato","en":"scientist","pos":"noun"},
					{"it":"ricercatore","en":"researcher","pos":"noun"},
					{"it":"programmatore","en":"programmer","pos":"noun"},
					{"it":"designer","en":"designer","pos":"noun"},
					{"it":"tempo","en":"time","pos":"noun"},
					{"it":"momento","en":"moment","pos":"noun"},
					{"it":"anno","en":"year","pos":"noun"},
					{"it":"mese","en":"month","pos":"noun"},
					{"it":"settimana","en":"week","pos":"noun"},
					{"it":"giorno","en":"day","pos":"noun"},
					{"it":"mattina","en":"morning","pos":"noun"},
					{"it":"pomeriggio","en":"afternoon","pos":"noun"},
					{"it":"sera","en":"evening","pos":"noun"},
					{"it":"notte","en":"night","pos":"noun"},
					{"it":"ora","en":"hour","pos":"noun"},
					{"it":"minuto","en":"minute","pos":"noun"},
					{"it":"secondo","en":"second","pos":"noun"},
					{"it":"appuntamento","en":"appointment","pos":"noun"},
					{"it":"ritardo","en":"delay","pos":"noun"},
					{"it":"anticipo","en":"advance","pos":"noun"},
					{"it":"inizio","en":"start","pos":"noun"},
					{"it":"fine","en":"end","pos":"noun"},
					{"it":"aiuto","en":"help","pos":"noun"},
					{"it":"lavoro","en":"work/job","pos":"noun"},
					{"it":"affare","en":"business/deal","pos":"noun"},
					{"it":"denaro","en":"money","pos":"noun"},
					{"it":"soldi","en":"money","pos":"noun"},
					{"it":"prezzo","en":"price","pos":"noun"},
					{"it":"costo","en":"cost","pos":"noun"},
					{"it":"valore","en":"value","pos":"noun"},
					{"it":"sconto","en":"discount","pos":"noun"},
					{"it":"fattura","en":"invoice","pos":"noun"},
					{"it":"ricevuta","en":"receipt","pos":"noun"},
					{"it":"conto","en":"bill/account","pos":"noun"},
					{"it":"pagamento","en":"payment","pos":"noun"},
					{"it":"carta","en":"card/paper","pos":"noun"},
					{"it":"moneta","en":"coin","pos":"noun"},
					{"it":"accordo","en":"agreement","pos":"noun"},
					{"it":"contratto","en":"contract","pos":"noun"},
					{"it":"legge","en":"law","pos":"noun"},
					{"it":"regola","en":"rule","pos":"noun"},
					{"it":"diritto","en":"right/law","pos":"noun"},
					{"it":"dovere","en":"duty","pos":"noun"},
					{"it":"permesso","en":"permit","pos":"noun"},
					{"it":"rischio","en":"risk","pos":"noun"},
					{"it":"pericolo","en":"danger","pos":"noun"},
					{"it":"sicurezza","en":"safety/security","pos":"noun"},
					{"it":"libertà","en":"freedom","pos":"noun"},
					{"it":"pace","en":"peace","pos":"noun"},
					{"it":"guerra","en":"war","pos":"noun"},
					{"it":"problema","en":"problem","pos":"noun"},
					{"it":"soluzione","en":"solution","pos":"noun"},
					{"it":"domanda","en":"question","pos":"noun"},
					{"it":"risposta","en":"answer","pos":"noun"},
					{"it":"idea","en":"idea","pos":"noun"},
					{"it":"pensiero","en":"thought","pos":"noun"},
					{"it":"memoria","en":"memory","pos":"noun"},
					{"it":"sogno","en":"dream","pos":"noun"},
					{"it":"speranza","en":"hope","pos":"noun"},
					{"it":"paura","en":"fear","pos":"noun"},
					{"it":"gioia","en":"joy","pos":"noun"},
					{"it":"tristezza","en":"sadness","pos":"noun"},
					{"it":"amore","en":"love","pos":"noun"},
					{"it":"odio","en":"hate","pos":"noun"},
					{"it":"amicizia","en":"friendship","pos":"noun"},
					{"it":"famiglia","en":"family","pos":"noun"},
					{"it":"matrimonio","en":"marriage","pos":"noun"},
					{"it":"festa","en":"party","pos":"noun"},
					{"it":"compleanno","en":"birthday","pos":"noun"},
					{"it":"viaggio","en":"trip","pos":"noun"},
					{"it":"vacanza","en":"holiday","pos":"noun"},
					{"it":"esperienza","en":"experience","pos":"noun"},
					{"it":"gioco","en":"game","pos":"noun"},
					{"it":"sport","en":"sport","pos":"noun"},
					{"it":"musica","en":"music","pos":"noun"},
					{"it":"arte","en":"art","pos":"noun"},
					{"it":"cultura","en":"culture","pos":"noun"},
					{"it":"lingua","en":"language","pos":"noun"},
					{"it":"stile","en":"style","pos":"noun"},
					{"it":"tradizione","en":"tradition","pos":"noun"},
					{"it":"religione","en":"religion","pos":"noun"},
					{"it":"scienza","en":"science","pos":"noun"},
					{"it":"natura","en":"nature","pos":"noun"},
					{"it":"tecnologia","en":"technology","pos":"noun"},
					{"it":"emozione","en":"emotion","pos":"noun"},
					{"it":"energia","en":"energy","pos":"noun"},
					{"it":"cane","en":"dog","pos":"noun"},
					{"it":"gatto","en":"cat","pos":"noun"},
					{"it":"uccello","en":"bird","pos":"noun"},
					{"it":"cavallo","en":"horse","pos":"noun"},
					{"it":"mucca","en":"cow","pos":"noun"},
					{"it":"pecora","en":"sheep","pos":"noun"},
					{"it":"capra","en":"goat","pos":"noun"},
					{"it":"maiale","en":"pig","pos":"noun"},
					{"it":"gallina","en":"hen","pos":"noun"},
					{"it":"anatra","en":"duck","pos":"noun"},
					{"it":"oca","en":"goose","pos":"noun"},
					{"it":"coniglio","en":"rabbit","pos":"noun"},
					{"it":"topo","en":"mouse","pos":"noun"},
					{"it":"rana","en":"frog","pos":"noun"},
					{"it":"lucertola","en":"lizard","pos":"noun"},
					{"it":"serpente","en":"snake","pos":"noun"},
					{"it":"tigre","en":"tiger","pos":"noun"},
					{"it":"leone","en":"lion","pos":"noun"},
					{"it":"orso","en":"bear","pos":"noun"},
					{"it":"volpe","en":"fox","pos":"noun"},
					{"it":"lupo","en":"wolf","pos":"noun"},
					{"it":"delfino","en":"dolphin","pos":"noun"},
					{"it":"balena","en":"whale","pos":"noun"},
					{"it":"farfalla","en":"butterfly","pos":"noun"},
					{"it":"testa","en":"head","pos":"noun"},
					{"it":"capelli","en":"hair","pos":"noun"},
					{"it":"fronte","en":"forehead","pos":"noun"},
					{"it":"occhio","en":"eye","pos":"noun"},
					{"it":"orecchio","en":"ear","pos":"noun"},
					{"it":"naso","en":"nose","pos":"noun"},
					{"it":"bocca","en":"mouth","pos":"noun"},
					{"it":"labbro","en":"lip","pos":"noun"},
					{"it":"dente","en":"tooth","pos":"noun"},
					{"it":"lingua","en":"tongue","pos":"noun"},
					{"it":"gola","en":"throat","pos":"noun"},
					{"it":"spalla","en":"shoulder","pos":"noun"},
					{"it":"braccio","en":"arm","pos":"noun"},
					{"it":"gomito","en":"elbow","pos":"noun"},
					{"it":"polso","en":"wrist","pos":"noun"},
					{"it":"mano","en":"hand","pos":"noun"},
					{"it":"dito","en":"finger","pos":"noun"},
					{"it":"petto","en":"chest","pos":"noun"},
					{"it":"schiena","en":"back","pos":"noun"},
					{"it":"pancia","en":"belly","pos":"noun"},
					{"it":"stomaco","en":"stomach","pos":"noun"},
					{"it":"cuore","en":"heart","pos":"noun"},
					{"it":"polmone","en":"lung","pos":"noun"},
					{"it":"fegato","en":"liver","pos":"noun"},
					{"it":"gamba","en":"leg","pos":"noun"},
					{"it":"ginocchio","en":"knee","pos":"noun"},
					{"it":"caviglia","en":"ankle","pos":"noun"},
					{"it":"piede","en":"foot","pos":"noun"},
					{"it":"maglietta","en":"t-shirt","pos":"noun"},
					{"it":"camicia","en":"shirt","pos":"noun"},
					{"it":"pantaloni","en":"trousers","pos":"noun"},
					{"it":"jeans","en":"jeans","pos":"noun"},
					{"it":"gonna","en":"skirt","pos":"noun"},
					{"it":"vestito","en":"dress/suit","pos":"noun"},
					{"it":"giacca","en":"jacket","pos":"noun"},
					{"it":"cappotto","en":"coat","pos":"noun"},
					{"it":"maglione","en":"sweater","pos":"noun"},
					{"it":"felpa","en":"hoodie","pos":"noun"},
					{"it":"scarpa","en":"shoe","pos":"noun"},
					{"it":"stivale","en":"boot","pos":"noun"},
					{"it":"sandalo","en":"sandal","pos":"noun"},
					{"it":"calza","en":"sock","pos":"noun"},
					{"it":"cappello","en":"hat","pos":"noun"},
					{"it":"sciarpa","en":"scarf","pos":"noun"},
					{"it":"guanto","en":"glove","pos":"noun"},
					{"it":"cintura","en":"belt","pos":"noun"},
					{"it":"borsa","en":"bag","pos":"noun"},
					{"it":"valigetta","en":"briefcase","pos":"noun"},
					{"it":"occhiali","en":"glasses","pos":"noun"},
					{"it":"ombrello","en":"umbrella","pos":"noun"},
					{"it":"essere","en":"to be","pos":"verb"},
					{"it":"avere","en":"to have","pos":"verb"},
					{"it":"fare","en":"to do/make","pos":"verb"},
					{"it":"dire","en":"to say","pos":"verb"},
					{"it":"andare","en":"to go","pos":"verb"},
					{"it":"venire","en":"to come","pos":"verb"},
					{"it":"vedere","en":"to see","pos":"verb"},
					{"it":"dare","en":"to give","pos":"verb"},
					{"it":"sapere","en":"to know (facts)","pos":"verb"},
					{"it":"stare","en":"to stay/feel","pos":"verb"},
					{"it":"potere","en":"to be able to","pos":"verb"},
					{"it":"dovere","en":"to have to","pos":"verb"},
					{"it":"volere","en":"to want","pos":"verb"},
					{"it":"prendere","en":"to take","pos":"verb"},
					{"it":"mettere","en":"to put","pos":"verb"},
					{"it":"trovare","en":"to find","pos":"verb"},
					{"it":"pensare","en":"to think","pos":"verb"},
					{"it":"parlare","en":"to speak","pos":"verb"},
					{"it":"mangiare","en":"to eat","pos":"verb"},
					{"it":"bere","en":"to drink","pos":"verb"},
					{"it":"leggere","en":"to read","pos":"verb"},
					{"it":"scrivere","en":"to write","pos":"verb"},
					{"it":"dormire","en":"to sleep","pos":"verb"},
					{"it":"aprire","en":"to open","pos":"verb"},
					{"it":"chiudere","en":"to close","pos":"verb"},
					{"it":"studiare","en":"to study","pos":"verb"},
					{"it":"lavorare","en":"to work","pos":"verb"},
					{"it":"usare","en":"to use","pos":"verb"},
					{"it":"giocare","en":"to play","pos":"verb"},
					{"it":"comprare","en":"to buy","pos":"verb"},
					{"it":"vendere","en":"to sell","pos":"verb"},
					{"it":"camminare","en":"to walk","pos":"verb"},
					{"it":"correre","en":"to run","pos":"verb"},
					{"it":"sentire","en":"to hear/feel","pos":"verb"},
					{"it":"ascoltare","en":"to listen","pos":"verb"},
					{"it":"guardare","en":"to watch","pos":"verb"},
					{"it":"vivere","en":"to live","pos":"verb"},
					{"it":"morire","en":"to die","pos":"verb"},
					{"it":"amare","en":"to love","pos":"verb"},
					{"it":"odiare","en":"to hate","pos":"verb"},
					{"it":"ricordare","en":"to remember","pos":"verb"},
					{"it":"dimenticare","en":"to forget","pos":"verb"},
					{"it":"aspettare","en":"to wait","pos":"verb"},
					{"it":"partire","en":"to leave","pos":"verb"},
					{"it":"arrivare","en":"to arrive","pos":"verb"},
					{"it":"capire","en":"to understand","pos":"verb"},
					{"it":"chiedere","en":"to ask","pos":"verb"},
					{"it":"rispondere","en":"to answer","pos":"verb"},
					{"it":"aiutare","en":"to help","pos":"verb"},
					{"it":"provare","en":"to try","pos":"verb"},
					{"it":"cambiare","en":"to change","pos":"verb"},
					{"it":"portare","en":"to bring/wear","pos":"verb"},
					{"it":"tornare","en":"to return","pos":"verb"},
					{"it":"scegliere","en":"to choose","pos":"verb"},
					{"it":"chiamare","en":"to call","pos":"verb"},
					{"it":"costruire","en":"to build","pos":"verb"},
					{"it":"cucinare","en":"to cook","pos":"verb"},
					{"it":"lavare","en":"to wash","pos":"verb"},
					{"it":"imparare","en":"to learn","pos":"verb"},
					{"it":"insegnare","en":"to teach","pos":"verb"},
					{"it":"pagare","en":"to pay","pos":"verb"},
					{"it":"viaggiare","en":"to travel","pos":"verb"},
					{"it":"guidare","en":"to drive","pos":"verb"},
					{"it":"entrare","en":"to enter","pos":"verb"},
					{"it":"uscire","en":"to go out","pos":"verb"},
					{"it":"sedersi","en":"to sit down","pos":"verb"},
					{"it":"alzarsi","en":"to get up","pos":"verb"},
					{"it":"nascere","en":"to be born","pos":"verb"},
					{"it":"crescere","en":"to grow","pos":"verb"},
					{"it":"decidere","en":"to decide","pos":"verb"},
					{"it":"ricevere","en":"to receive","pos":"verb"},
					{"it":"preferire","en":"to prefer","pos":"verb"},
					{"it":"finire","en":"to finish","pos":"verb"},
					{"it":"iniziare","en":"to start","pos":"verb"},
					{"it":"visitare","en":"to visit","pos":"verb"},
					{"it":"restare","en":"to stay/remain","pos":"verb"},
					{"it":"incontrare","en":"to meet","pos":"verb"},
					{"it":"telefonare","en":"to phone","pos":"verb"},
					{"it":"inviare","en":"to send","pos":"verb"},
					{"it":"spiegare","en":"to explain","pos":"verb"},
					{"it":"mostrare","en":"to show","pos":"verb"},
					{"it":"creare","en":"to create","pos":"verb"},
					{"it":"disegnare","en":"to draw","pos":"verb"},
					{"it":"bello","en":"beautiful","pos":"adj"},
					{"it":"brutto","en":"ugly","pos":"adj"},
					{"it":"grande","en":"big","pos":"adj"},
					{"it":"piccolo","en":"small","pos":"adj"},
					{"it":"lungo","en":"long","pos":"adj"},
					{"it":"corto","en":"short","pos":"adj"},
					{"it":"alto","en":"tall/high","pos":"adj"},
					{"it":"basso","en":"short/low","pos":"adj"},
					{"it":"giovane","en":"young","pos":"adj"},
					{"it":"vecchio","en":"old","pos":"adj"},
					{"it":"nuovo","en":"new","pos":"adj"},
					{"it":"buono","en":"good","pos":"adj"},
					{"it":"cattivo","en":"bad","pos":"adj"},
					{"it":"caldo","en":"hot","pos":"adj"},
					{"it":"freddo","en":"cold","pos":"adj"},
					{"it":"facile","en":"easy","pos":"adj"},
					{"it":"difficile","en":"difficult","pos":"adj"},
					{"it":"felice","en":"happy","pos":"adj"},
					{"it":"triste","en":"sad","pos":"adj"},
					{"it":"stanco","en":"tired","pos":"adj"},
					{"it":"forte","en":"strong","pos":"adj"},
					{"it":"debole","en":"weak","pos":"adj"},
					{"it":"ricco","en":"rich","pos":"adj"},
					{"it":"povero","en":"poor","pos":"adj"},
					{"it":"caro","en":"expensive/dear","pos":"adj"},
					{"it":"economico","en":"cheap","pos":"adj"},
					{"it":"sicuro","en":"safe/sure","pos":"adj"},
					{"it":"pericoloso","en":"dangerous","pos":"adj"},
					{"it":"aperto","en":"open","pos":"adj"},
					{"it":"chiuso","en":"closed","pos":"adj"},
					{"it":"veloce","en":"fast","pos":"adj"},
					{"it":"lento","en":"slow","pos":"adj"},
					{"it":"interessante","en":"interesting","pos":"adj"},
					{"it":"noioso","en":"boring","pos":"adj"},
					{"it":"semplice","en":"simple","pos":"adj"},
					{"it":"complesso","en":"complex","pos":"adj"},
					{"it":"chiaro","en":"clear/light","pos":"adj"},
					{"it":"scuro","en":"dark","pos":"adj"},
					{"it":"pulito","en":"clean","pos":"adj"},
					{"it":"sporco","en":"dirty","pos":"adj"},
					{"it":"vicino","en":"near","pos":"adj"},
					{"it":"lontano","en":"far","pos":"adj"},
					{"it":"pronto","en":"ready","pos":"adj"},
					{"it":"occupato","en":"busy","pos":"adj"},
					{"it":"libero","en":"free","pos":"adj"},
					{"it":"famoso","en":"famous","pos":"adj"},
					{"it":"importante","en":"important","pos":"adj"},
					{"it":"utile","en":"useful","pos":"adj"},
					{"it":"inutile","en":"useless","pos":"adj"},
					{"it":"sano","en":"healthy","pos":"adj"},
					{"it":"malato","en":"ill","pos":"adj"},
					{"it":"dolce","en":"sweet","pos":"adj"},
					{"it":"salato","en":"salty","pos":"adj"},
					{"it":"amaro","en":"bitter","pos":"adj"},
					{"it":"acido","en":"sour","pos":"adj"},
					{"it":"fresco","en":"fresh","pos":"adj"},
					{"it":"secco","en":"dry","pos":"adj"},
					{"it":"bagnato","en":"wet","pos":"adj"},
					{"it":"pieno","en":"full","pos":"adj"},
					{"it":"vuoto","en":"empty","pos":"adj"},
					{"it":"leggero","en":"light (weight)","pos":"adj"},
					{"it":"pesante","en":"heavy","pos":"adj"},
					{"it":"duro","en":"hard","pos":"adj"},
					{"it":"morbido","en":"soft","pos":"adj"},
					{"it":"contento","en":"glad","pos":"adj"},
					{"it":"arrabbiato","en":"angry","pos":"adj"},
					{"it":"calmo","en":"calm","pos":"adj"},
					{"it":"rumoroso","en":"noisy","pos":"adj"},
					{"it":"silenzioso","en":"quiet","pos":"adj"},
					{"it":"luminoso","en":"bright","pos":"adj"},
					{"it":"buio","en":"dark","pos":"adj"},
					{"it":"sempre","en":"always","pos":"adv"},
					{"it":"mai","en":"never","pos":"adv"},
					{"it":"spesso","en":"often","pos":"adv"},
					{"it":"raramente","en":"rarely","pos":"adv"},
					{"it":"oggi","en":"today","pos":"adv"},
					{"it":"domani","en":"tomorrow","pos":"adv"},
					{"it":"ieri","en":"yesterday","pos":"adv"},
					{"it":"presto","en":"early/soon","pos":"adv"},
					{"it":"tardi","en":"late","pos":"adv"},
					{"it":"adesso","en":"now","pos":"adv"},
					{"it":"poi","en":"then/later","pos":"adv"},
					{"it":"prima","en":"before","pos":"adv"},
					{"it":"dopo","en":"after","pos":"adv"},
					{"it":"qui","en":"here","pos":"adv"},
					{"it":"lì","en":"there","pos":"adv"},
					{"it":"ovunque","en":"everywhere","pos":"adv"},
					{"it":"bene","en":"well","pos":"adv"},
					{"it":"male","en":"badly","pos":"adv"},
					{"it":"piano","en":"slowly/softly","pos":"adv"},
					{"it":"forte","en":"loudly/strongly","pos":"adv"},
					{"it":"molto","en":"very/a lot","pos":"adv"},
					{"it":"poco","en":"a little","pos":"adv"},
					{"it":"abbastanza","en":"enough/rather","pos":"adv"},
					{"it":"quasi","en":"almost","pos":"adv"},
					{"it":"davvero","en":"really","pos":"adv"},
					{"it":"soltanto","en":"only","pos":"adv"},
					{"it":"ancora","en":"still/again","pos":"adv"},
					{"it":"già","en":"already","pos":"adv"},
					{"it":"insieme","en":"together","pos":"adv"},
					{"it":"subito","en":"immediately","pos":"adv"},
					{"it":"lentamente","en":"slowly","pos":"adv"},
					{"it":"rapidamente","en":"quickly","pos":"adv"},
					{"it":"facilmente","en":"easily","pos":"adv"},
					{"it":"difficilmente","en":"with difficulty","pos":"adv"},
					{"it":"probabilmente","en":"probably","pos":"adv"},
					{"it":"sicuramente","en":"surely","pos":"adv"},
					{"it":"circa","en":"approximately","pos":"adv"},
					{"it":"forse","en":"perhaps","pos":"adv"}
				]
			}
		</script>

		<!-- React + ReactDOM + Babel -->
		<script
			crossorigin
			src="https://unpkg.com/react@18/umd/react.development.js"
		></script>
		<script
			crossorigin
			src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
		></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

		<script type="text/babel">
			const POS = { noun: 'noun', verb: 'verb', adj: 'adj', adv: 'adv' }
			const POS_META = {
				noun: {
					label: 'Noun',
					color:
						getComputedStyle(document.documentElement)
							.getPropertyValue('--green')
							.trim() || '#29a36d',
				},
				verb: {
					label: 'Verb',
					color:
						getComputedStyle(document.documentElement)
							.getPropertyValue('--red')
							.trim() || '#d93b3b',
				},
				adj: {
					label: 'Adjective',
					color:
						getComputedStyle(document.documentElement)
							.getPropertyValue('--blue')
							.trim() || '#2f7bdc',
				},
				adv: {
					label: 'Adverb',
					color:
						getComputedStyle(document.documentElement)
							.getPropertyValue('--gold')
							.trim() || '#e0b000',
				},
			}

			// helpers for importing
			const POS_CANON = {
				noun: 'noun', nouns: 'noun', sostantivo: 'noun',
				verb: 'verb', verbs: 'verb', verbo: 'verb',
				adj: 'adj', adjective: 'adj', adjectives: 'adj', aggettivo: 'adj',
				adv: 'adv', adverb: 'adv', adverbs: 'adv', avverbio: 'adv',
			}
			const toCanonPos = (s) => POS_CANON[String(s || '').trim().toLowerCase()]

			function readUserPacks() {
				try {
					const raw = localStorage.getItem('itwb_final_user_packs')
					const arr = raw ? JSON.parse(raw) : []
					if (!Array.isArray(arr)) return []
					return arr
				} catch { return [] }
			}
			function saveUserPacks(packs) {
				try { localStorage.setItem('itwb_final_user_packs', JSON.stringify(packs)) } catch {}
			}

			function readPacksDetailed() {
				const scripts = [
					...document.querySelectorAll(
						'script[type="application/json"][id^="pack-"],script[type="application/json"][id="pack-core"]'
					),
				]
				const packs = []
				const out = []
				const toTitle = (id) =>
					id
						.replace(/^pack-/, '')
						.replace(/-/g, ' ')
						.replace(/\b\w/g, (c) => c.toUpperCase())
				for (const s of scripts) {
					const packId = s.id
					const packLabel = s.dataset.label || toTitle(packId)
					packs.push({ id: packId, label: packLabel })
					try {
						const obj = JSON.parse(s.textContent.trim())
						const wordsArr = Array.isArray(obj) ? obj : obj?.words || []
						for (const w of wordsArr) out.push({ ...w, __pack: packId })
					} catch (e) {
						console.warn('Bad pack', s.id, e)
					}
				}
				// include user packs from localStorage
				const userPacks = readUserPacks()
				for (const up of userPacks) {
					const pid = up.id
					packs.push({ id: pid, label: up.label || toTitle(pid) })
					const wordsArr = Array.isArray(up.words) ? up.words : []
					for (const w of wordsArr) out.push({ ...w, __pack: pid })
				}
				// normalise, filter, dedupe while tracking membership per pack
				const key = (w) =>
					`${(w.it || '').toLowerCase()}|${(w.en || '').toLowerCase()}|${(
						w.pos || ''
					).toLowerCase()}`
				const map = new Map()
				for (const w of out) {
					const pos = (w.pos || '').toLowerCase()
					if (!POS[pos]) continue
					const rec = {
						it: String(w.it),
						en: String(w.en),
						pos,
						packs: [w.__pack],
					}
					if (!rec.it || !rec.en) continue
					const k = key(rec)
					if (map.has(k)) {
						const existing = map.get(k)
						if (!existing.packs.includes(w.__pack)) existing.packs.push(w.__pack)
					} else {
						map.set(k, rec)
					}
				}
				const words = [...map.values()]
				// compute counts per pack after dedupe
				const counts = Object.fromEntries(packs.map((p) => [p.id, 0]))
				for (const w of words) for (const pid of w.packs) counts[pid] = (counts[pid] || 0) + 1
				return { words, packs: packs.map((p) => ({ ...p, count: counts[p.id] || 0 })) }
			}

			const rand = (n) => Math.floor(Math.random() * n)
			const shuffle = (arr) => {
				const a = arr.slice()
				for (let i = a.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1))
					;[a[i], a[j]] = [a[j], a[i]]
				}
				return a
			}
			function useLocalStorage(key, initial) {
				const [state, setState] = React.useState(() => {
					try {
						const raw = localStorage.getItem(key)
						return raw ? JSON.parse(raw) : initial
					} catch {
						return initial
					}
				})
				React.useEffect(() => {
					try {
						localStorage.setItem(key, JSON.stringify(state))
					} catch {}
				}, [key, state])
				return [state, setState]
			}

			function ProgressRing({ value, max, color }) {
				const pct = Math.max(0, Math.min(1, max ? value / max : 0))
				const size = 120,
					s = 10,
					r = (size - s) / 2,
					C = 2 * Math.PI * r,
					off = C * (1 - pct)
				return (
					<div className="progress">
						<svg width={size} height={size} viewBox={`0 0 ${size} ${size}`}>
							<circle
								cx={size / 2}
								cy={size / 2}
								r={r}
								fill="none"
								stroke="#1f2a3a"
								strokeWidth={s}
							/>
							<circle
								cx={size / 2}
								cy={size / 2}
								r={r}
								fill="none"
								stroke={color}
								strokeWidth={s}
								strokeLinecap="round"
								strokeDasharray={`${C} ${C}`}
								strokeDashoffset={off}
								style={{ transition: 'stroke-dashoffset .5s ease' }}
							/>
						</svg>
						<div className="center">
							<strong>{value}</strong>
							<span>target {max}</span>
						</div>
					</div>
				)
			}
			function Legend() {
				return (
					<div className="pos-legend">
						{Object.entries(POS_META).map(([k, v]) => (
							<div key={k} className="legend-item">
								<span className="swatch" style={{ background: v.color }} />{' '}
								{v.label}
							</div>
						))}
					</div>
				)
			}

			function useFireworks() {
				const ref = React.useRef(null)
				React.useEffect(() => {
					ref.current = document.getElementById('fw')
				}, [])
				return React.useCallback(() => {
					const canvas = ref.current
					if (!canvas) return
					const ctx = canvas.getContext('2d')
					const DPR = Math.max(1, window.devicePixelRatio || 1)
					canvas.width = window.innerWidth * DPR
					canvas.height = window.innerHeight * DPR
					ctx.scale(DPR, DPR)
					const parts = []
					const colors = ['#2db665', '#e24343', '#2f7bdc', '#e0b000', '#ffffff']
					const spawn = (x, y) => {
						const n = 80 + rand(60)
						for (let i = 0; i < n; i++) {
							parts.push({
								x,
								y,
								vx: (Math.random() * 2 - 1) * (4 + Math.random() * 3),
								vy: (Math.random() * 2 - 1) * (4 + Math.random() * 3),
								life: 60 + rand(40),
								color: colors[rand(colors.length)],
								size: 2 + Math.random() * 2,
							})
						}
					}
					for (let i = 0; i < 5; i++)
						setTimeout(
							() =>
								spawn(
									80 + Math.random() * (window.innerWidth - 160),
									80 + Math.random() * (window.innerHeight - 200)
								),
							i * 200
						)
					let frame = 0
					const tick = () => {
						frame++
						ctx.clearRect(0, 0, canvas.width, canvas.height)
						for (const p of parts) {
							p.vy += 0.04
							p.x += p.vx
							p.y += p.vy
							p.life--
							p.size *= 0.985
							if (p.life > 0 && p.size > 0.3) {
								ctx.globalCompositeOperation = 'lighter'
								ctx.fillStyle = p.color
								ctx.beginPath()
								ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2)
								ctx.fill()
							}
						}
						if (frame < 260) requestAnimationFrame(tick)
						else ctx.clearRect(0, 0, canvas.width, canvas.height)
					}
					tick()
				}, [])
			}

			function App() {
				const { words: allWords, packs: packList } = React.useMemo(() => readPacksDetailed(), [])
				const defaultPackOn = React.useMemo(
					() => Object.fromEntries(packList.map((p) => [p.id, true])),
					[packList]
				)
				const [settings, setSettings] = useLocalStorage('itwb_final_settings', {
					numOptions: 3,
					targetWins: 10,
					pos: { noun: true, verb: true, adj: true, adv: true },
					packOn: defaultPackOn,
				})
				// ensure any new packs default to on
				React.useEffect(() => {
					setSettings((s) => {
						const next = { ...s, packOn: { ...(s.packOn || {}) } }
						let changed = false
						for (const p of packList) if (next.packOn[p.id] === undefined) { next.packOn[p.id] = true; changed = true }
						return changed ? next : s
					})
				}, [packList])
				const [score, setScore] = React.useState({ correct: 0, incorrect: 0 })
				const [state, setState] = React.useState({
					word: null,
					options: [],
					status: null,
				})
				const [stats, setStats] = React.useState({
					total: 0,
					byPos: { noun: 0, verb: 0, adj: 0, adv: 0 },
				})
				const askedRef = React.useRef(new Set())
				const fw = useFireworks()

				const pool = React.useMemo(() => {
					const on = settings.packOn || {}
					return allWords.filter(
						(w) => settings.pos[w.pos] && w.packs?.some((pid) => on[pid] !== false)
					)
				}, [allWords, settings.pos, settings.packOn])
				React.useEffect(() => {
					const byPos = { noun: 0, verb: 0, adj: 0, adv: 0 }
					for (const w of allWords) {
						if (byPos[w.pos] != null) byPos[w.pos]++
					}
					setStats({ total: allWords.length, byPos })
				}, [allWords])

				const nextQuestion = React.useCallback(() => {
					if (pool.length === 0) {
						setState({ word: null, options: [], status: null })
						return
					}
					if (askedRef.current.size >= pool.length) askedRef.current.clear()
					let idx
					let tries = 0
					do {
						idx = rand(pool.length)
						tries++
					} while (askedRef.current.has(idx) && tries < 10)
					askedRef.current.add(idx)
					const q = pool[idx]
					const same = shuffle(
						pool.filter((w, i) => i !== idx && w.pos === q.pos)
					).slice(0, Math.max(0, settings.numOptions - 1))
					const need = settings.numOptions - 1 - same.length
					const extra =
						need > 0
							? shuffle(
									pool.filter((w, i) => i !== idx && !same.includes(w))
							  ).slice(0, need)
							: []
					const opts = shuffle([q, ...same, ...extra]).map((w) => ({
						en: w.en,
						correct: w === q,
					}))
					setState({ word: q, options: opts, status: null })
				}, [pool, settings.numOptions])
				React.useEffect(() => {
					nextQuestion()
				}, [nextQuestion])

				function togglePos(k) {
					setSettings((s) => ({ ...s, pos: { ...s.pos, [k]: !s.pos[k] } }))
				}
				function togglePack(id) {
					setSettings((s) => {
						const on = s.packOn?.[id] !== false
						return { ...s, packOn: { ...(s.packOn || {}), [id]: !on } }
					})
				}
				function selectAllPacks() {
					setSettings((s) => ({ ...s, packOn: Object.fromEntries(packList.map((p) => [p.id, true])) }))
				}
				function selectNoPacks() {
					setSettings((s) => ({ ...s, packOn: Object.fromEntries(packList.map((p) => [p.id, false])) }))
				}

				// import custom pack
				const fileInputRef = React.useRef(null)
				function openImport() { fileInputRef.current?.click() }
				function parseCSV(text) {
					const lines = text.replace(/\r\n?/g, '\n').split('\n').filter(Boolean)
					if (!lines.length) return []
					const header = lines[0]
					const delim = header.includes('\t') ? '\t' : (header.includes(';') ? ';' : ',')
					const cols = header.split(new RegExp(`${delim}`)).map((c) => c.trim().toLowerCase())
					const idx = {
						it: cols.findIndex((c) => ['it','italian','italiano','word'].includes(c)),
						en: cols.findIndex((c) => ['en','english','inglese','meaning','gloss','translation'].includes(c)),
						pos: cols.findIndex((c) => ['pos','part_of_speech','type','categoria'].includes(c)),
					}
					const out = []
					for (let i = 1; i < lines.length; i++) {
						const parts = lines[i].split(new RegExp(`${delim}`)).map((x) => x.trim())
						const it = idx.it >= 0 ? parts[idx.it] : ''
						const en = idx.en >= 0 ? parts[idx.en] : ''
						const pos = toCanonPos(idx.pos >= 0 ? parts[idx.pos] : '')
						if (it && en && pos && POS[pos]) out.push({ it, en, pos })
					}
					return out
				}
				function handleImportFile(e) {
					const f = e.target.files?.[0]
					if (!f) return
					const reader = new FileReader()
					reader.onload = () => {
						try {
							const text = String(reader.result || '')
							let words = []
							if (/^[\s\n]*[\[{]/.test(text)) {
								const obj = JSON.parse(text)
								const arr = Array.isArray(obj) ? obj : obj?.words || []
								for (const w of arr) {
									const pos = toCanonPos(w.pos)
									if (w.it && w.en && pos && POS[pos]) words.push({ it: String(w.it), en: String(w.en), pos })
								}
							} else {
								words = parseCSV(text)
							}
							if (!words.length) return
							const safeName = (f.name || 'import').replace(/\.[^.]+$/, '')
							const id = `pack-user-${Date.now()}`
							const label = `Imported: ${safeName}`
							const packs = readUserPacks()
							packs.push({ id, label, words })
							saveUserPacks(packs)
							// turn it on
							setSettings((s) => ({ ...s, packOn: { ...(s.packOn || {}), [id]: true } }))
							// hard refresh the computed packs by reloading page (simplest single-file approach)
							location.reload()
							} catch (err) {
								console.error('Import failed', err)
								alert('Import failed: ' + (err?.message || 'invalid file'))
							}
					}
					reader.readAsText(f)
				}
				function clearCustomPacks() {
					if (!confirm('Remove all imported packs?')) return
					saveUserPacks([])
					location.reload()
				}
				function handleAnswer(opt, i) {
					if (!state.word) return
					if (opt.correct) {
						setScore((sc) => ({ ...sc, correct: sc.correct + 1 }))
						setState((st) => ({ ...st, status: 'correct' }))
						setTimeout(() => {
							if (score.correct + 1 >= settings.targetWins) {
								setWinOpen(true)
								fw()
							} else nextQuestion()
						}, 450)
					} else {
						setScore((sc) => ({ ...sc, incorrect: sc.incorrect + 1 }))
						const btn = document.querySelector(`[data-opt="${i}"]`)
						if (btn) {
							btn.classList.add('shake')
							setTimeout(() => btn.classList.remove('shake'), 300)
						}
						setState((st) => ({ ...st, status: 'wrong' }))
						setTimeout(() => nextQuestion(), 650)
					}
				}

				const [winOpen, setWinOpen] = React.useState(false)
				function resetGame() {
					setScore({ correct: 0, incorrect: 0 })
					setWinOpen(false)
					askedRef.current.clear()
					nextQuestion()
				}

				const posLabel = state.word ? POS_META[state.word.pos].label : ''
				const posColor = state.word ? POS_META[state.word.pos].color : '#29a36d'

				return (
					<div className="wrap">
						<header>
							<div className="brand">
								<div className="logo">
									<div className="flag" />
								</div>
								<div>
									<h1>Italian Word Blaster — FINAL</h1>
									<div className="sub">
										Single‑file • Huge packs • Dark Italian vibe • Fireworks 🎆
									</div>
								</div>
							</div>
							<div className="score">
								<div className="chip good">✅ Correct: {score.correct}</div>
								<div className="chip bad">❌ Wrong: {score.incorrect}</div>
								<button className="btn" onClick={resetGame}>
									Reset
								</button>
							</div>
						</header>

						<div className="controls panel">
							<div className="ctrl">
								<label>Word types to practise</label>
								<div className="pos-pills">
									{Object.keys(POS).map((key) => (
										<div
											key={key}
											data-pos={key}
											className={`pill ${settings.pos[key] ? 'active' : ''}`}
											onClick={() => togglePos(key)}>
											<input
												type="checkbox"
												checked={!!settings.pos[key]}
												readOnly
											/>{' '}
											{POS_META[key].label}
										</div>
									))}
								</div>
							</div>
							<div className="ctrl">
								<label>Word packs to include</label>
								<div style={{ display: 'flex', gap: 8, marginBottom: 6, flexWrap: 'wrap' }}>
									<button className="btn" onClick={selectAllPacks}>All</button>
									<button className="btn" onClick={selectNoPacks}>None</button>
									<button className="btn" onClick={openImport}>Import CSV/JSON</button>
									<button className="btn" onClick={clearCustomPacks} title="Remove all imported packs">Clear imports</button>
									<input type="file" accept=".csv,.json,.txt,application/json,text/csv" ref={fileInputRef} onChange={handleImportFile} style={{ display: 'none' }} />
								</div>
								<div className="pos-pills">
									{packList.map((p) => {
										const on = settings.packOn?.[p.id] !== false
										return (
											<div
												key={p.id}
												className={`pill ${on ? 'active' : ''}`}
												onClick={() => togglePack(p.id)}
												style={{ padding: '6px 10px' }}
												title={`${p.label} • ${p.count} words`}>
												<input type="checkbox" checked={on} readOnly /> {p.label}
												<span style={{ opacity: 0.7 }}> ({p.count})</span>
											</div>
										)
									})}
								</div>
							</div>
							<div className="ctrl">
								<label>Choices per question</label>
								<input
									type="number"
									min="2"
									max="6"
									value={settings.numOptions}
									onChange={(e) =>
										setSettings((s) => ({
											...s,
											numOptions: Math.max(
												2,
												Math.min(6, parseInt(e.target.value || 3))
											),
										}))
									}
								/>
							</div>
							<div className="ctrl">
								<label>Target number of correct answers</label>
								<input
									type="number"
									min="3"
									max="200"
									value={settings.targetWins}
									onChange={(e) =>
										setSettings((s) => ({
											...s,
											targetWins: Math.max(
												3,
												Math.min(200, parseInt(e.target.value || 10))
											),
										}))
									}
								/>
							</div>
							<div className="ctrl">
								<label>Pack stats</label>
								<div
									style={{
										display: 'grid',
										gridTemplateColumns: 'repeat(4,1fr)',
										gap: 6,
										fontSize: 12,
										color: 'var(--muted)',
									}}>
									<div>
										All: <strong>{stats.total}</strong>
									</div>
									<div>
										🟩 N: <strong>{stats.byPos.noun}</strong>
									</div>
									<div>
										🟥 V: <strong>{stats.byPos.verb}</strong>
									</div>
									<div>
										🟦 Adj: <strong>{stats.byPos.adj}</strong> · 🟨 Adv:{' '}
										<strong>{stats.byPos.adv}</strong>
									</div>
									<div style={{ gridColumn: '1 / -1' }}>
										Pool (filters applied): <strong>{pool.length}</strong>
									</div>
								</div>
							</div>
						</div>

						<div className="grid">
							<div className="qcard" data-pos={state.word?.pos || 'noun'}>
								<div className="qbadge">{posLabel}</div>
								<div
									className="qword"
									style={{
										textShadow: `0 2px 0 rgba(0,0,0,.45), 0 0 30px ${posColor}40`,
									}}>
									{state.word?.it || '—'}
								</div>
								<div className="hint">Tap the correct English meaning</div>
								<div className="optgrid" style={{ marginTop: 16 }}>
									{state.options.map((opt, i) => (
										<button
											key={i}
											data-opt={i}
											className={`optbtn ${
												state.status && (opt.correct ? 'correct' : '')
											}`}
											onClick={() => handleAnswer(opt, i)}
											style={{
												borderColor: state.word ? posColor + '40' : '#1d2430',
											}}>
											<div
												style={{
													fontSize: 'clamp(16px,2.2vw,20px)',
													fontWeight: 700,
												}}>
												{opt.en}
											</div>
										</button>
									))}
								</div>
							</div>
							<div className="side">
								<div
									className="panel"
									style={{ display: 'grid', placeItems: 'center' }}>
									<ProgressRing
										value={score.correct}
										max={settings.targetWins}
										color={posColor}
									/>
								</div>
								<div className="panel">
									<Legend />
								</div>
								<div
									className="panel"
									style={{ fontSize: 12, color: 'var(--muted)' }}>
									<strong>Tip:</strong> To add more words, duplicate any{' '}
									<code>
										&lt;script id="pack-..." type="application/json"&gt;
									</code>{' '}
									with an array of{' '}
									<code>{`{"it":"parola","en":"word","pos":"noun"}`}</code>. The
									app auto‑merges & de‑dupes on load.
								</div>
							</div>
						</div>

						<div className="footer">
							<div>Packs merged: {stats.total} words loaded • Pool: {pool.length}</div>
							<div>v3.1 • single‑file</div>
						</div>

						{winOpen && (
							<div className="overlay" onClick={() => setWinOpen(false)}>
								<div className="win panel" onClick={(e) => e.stopPropagation()}>
									<div className="trophy">🏆</div>
									<h2>Ben fatto!</h2>
									<p>
										You reached your target of {settings.targetWins} correct
										answers.
										<br />
										Score: <strong>{score.correct}</strong> ✅ &nbsp;{' '}
										<strong>{score.incorrect}</strong> ❌
									</p>
									<button
										className="btn"
										onClick={() => {
											setWinOpen(false)
											resetGame()
										}}>
										Play again
									</button>
								</div>
							</div>
						)}
					</div>
				)
			}

			const root = ReactDOM.createRoot(document.getElementById('root'))
			root.render(<App />)
		</script>
	</body>
</html>

